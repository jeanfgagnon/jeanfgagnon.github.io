(self.webpackChunkng_lister_pwa=self.webpackChunkng_lister_pwa||[]).push([[949],{2949:(Y,D,c)=>{"use strict";c.r(D),c.d(D,{ConfigModule:()=>at});var g=c(6895),u=c(4006),w=c(4425),M=c(9814),$=c(643),_=c(9299),b=c(7579),q=c(9841),a=c(2722),d=c(4327),e=c(4650),f=c(1258),m=c(6007),p=c(4859),S=c(3336),I=c(266);const R=["dumpzone"];function E(r,o){if(1&r){const t=e.EpF();e.TgZ(0,"div"),e._uU(1," Please choose the backup method:"),e._UZ(2,"br"),e.TgZ(3,"button",4),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.setDumpMethod("cut"))}),e._uU(4,"Cut & Paste"),e.qZA(),e._uU(5,"\xa0 "),e.TgZ(6,"button",5),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.setDumpMethod("file"))}),e._uU(7,"File download"),e.qZA(),e._UZ(8,"br"),e.TgZ(9,"span",6),e._uU(10,"download is the suggested way"),e.qZA()()}}function O(r,o){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"button",7),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onClip())}),e.TgZ(2,"mat-icon"),e._uU(3,"copy_all"),e.qZA()()()}if(2&r){const t=e.oxw();e.xp6(1),e.Q6J("cdkCopyToClipboard",t.json)}}let Z=(()=>{class r{constructor(t,i,s){this.persistService=t,this.globalStateService=i,this.window=s,this.categories=[],this.headers=[],this.items=[],this.subItems=[],this.settings=[],this.unsubscribe$=new b.x,this.json="",this.dumpMethod=""}ngOnInit(){this.globalStateService.sendMessage("ManageBackup")}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}ngAfterViewInit(){(0,q.a)([this.persistService.query("categories",!0),this.persistService.query("headers",!0),this.persistService.query("items",!0),this.persistService.query("subitems",!0),this.persistService.query("settings",!0)]).pipe((0,a.R)(this.unsubscribe$)).subscribe(([i,s,n,l,h])=>{this.appendObject(this.categories,i),this.appendObject(this.headers,s),this.appendObject(this.items,n),this.appendObject(this.subItems,l),this.appendObject(this.settings,h)},i=>{},()=>{this.tieAll(),this.writeTree()})}onClip(){this.window.navigator.vibrate(200)}setDumpMethod(t){this.dumpMethod=t,"cut"===t?this.dumpzone.nativeElement.innerText=this.json:this.downloadJson(this.json)}appendObject(t,i){-1===t.findIndex(s=>s.id===i.id)&&t.push(i)}tieAll(){this.categories.forEach(t=>{t.headers=this.headers.filter(i=>i.idCategory===t.id),this.headers.forEach(i=>{i.items=this.items.filter(s=>s.idHeader===i.id),i.items.forEach(s=>{s.subs=this.subItems.filter(n=>n.idItem===s.id)})})})}writeTree(){this.json=JSON.stringify({version:this.persistService.dbVersion,date:new Date,settings:this.settings,database:this.categories},null,2)}downloadJson(t){const i=new Blob([t],{type:"application/json"});d.saveAs(i,"lister-database.txt")}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(f.Y),e.Y36(m.O),e.Y36("Window"))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-dump-database"]],viewQuery:function(t,i){if(1&t&&e.Gf(R,5),2&t){let s;e.iGM(s=e.CRH())&&(i.dumpzone=s.first)}},decls:8,vars:2,consts:[[1,"pad10"],[4,"ngIf"],[1,"ovh"],["dumpzone",""],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","accent",3,"click"],[1,"pssit"],["mat-mini-fab","","color","primary","type","button","matTooltip","Copy to clipboard",1,"clipboard-fab",3,"cdkCopyToClipboard","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"h2"),e._uU(2,"Backup"),e.qZA(),e.YNc(3,E,11,0,"div",1),e.TgZ(4,"div",2),e._UZ(5,"pre",null,3),e.qZA(),e.YNc(7,O,4,1,"div",1),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf",""===i.dumpMethod),e.xp6(4),e.Q6J("ngIf","cut"===i.dumpMethod))},dependencies:[g.O5,w.i3,p.lW,p.nh,S.Hw,I.gM],styles:[".clipboard-fab[_ngcontent-%COMP%]{position:fixed;right:20px;bottom:20px;left:auto}.pssit[_ngcontent-%COMP%]{font-style:italic;font-size:smaller}"]}),r})();var J=c(8028),N=c(9541),y=c(8900),F=c(5412),x=c(1576),j=c(5829),P=c(6709),A=c(3546),T=c(6338),V=c(4850),C=c(9549),L=c(4144);function W(r,o){if(1&r&&(e.TgZ(0,"div",18),e._uU(1),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.Oqu(t.errorMessage)}}function X(r,o){if(1&r){const t=e.EpF();e.TgZ(0,"div",19)(1,"button",20),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.onDeleteCategory())}),e.TgZ(2,"mat-icon"),e._uU(3,"delete"),e.qZA()()()}}function ee(r,o){if(1&r){const t=e.EpF();e.TgZ(0,"form",7),e.NdJ("submit",function(s){e.CHM(t);const n=e.oxw();return e.KtG(n.formSubmitted(s))}),e.TgZ(1,"div")(2,"div",8)(3,"div",9)(4,"mat-form-field",10)(5,"mat-label"),e._uU(6,"Category name"),e.qZA(),e.TgZ(7,"input",11),e.NdJ("ngModelChange",function(s){e.CHM(t);const n=e.oxw();return e.KtG(n.categoryName=s)}),e.qZA(),e.YNc(8,W,2,1,"div",12),e.qZA()(),e.YNc(9,X,4,0,"div",13),e.qZA(),e.TgZ(10,"mat-checkbox",14),e.NdJ("change",function(s){e.CHM(t);const n=e.oxw();return e.KtG(n.onCheckboxChange(s))}),e._uU(11,"Default category at startup "),e.qZA(),e._UZ(12,"br")(13,"br"),e.TgZ(14,"div",15)(15,"button",16),e._uU(16),e.qZA(),e._uU(17,"\xa0 "),e.TgZ(18,"button",17),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.toggleFormVisibility())}),e._uU(19," Return "),e.qZA(),e._uU(20,"\xa0 "),e.qZA()(),e._UZ(21,"br")(22,"mat-divider"),e.qZA()}if(2&r){const t=e.oxw();e.xp6(7),e.Q6J("ngModel",t.categoryName),e.xp6(1),e.Q6J("ngIf",""!==t.errorMessage),e.xp6(1),e.Q6J("ngIf","Add"!==t.actionVerb),e.xp6(1),e.Q6J("checked",t.categoryIsDefault),e.xp6(5),e.Q6J("disabled",""===t.categoryName),e.xp6(1),e.Oqu(t.actionVerb)}}const te=function(r){return{fb:r}};function ie(r,o){if(1&r){const t=e.EpF();e.TgZ(0,"a",21),e.NdJ("click",function(){const n=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.onCategoryClick(n))}),e._uU(1),e.qZA()}if(2&r){const t=o.$implicit;e.Q6J("ngClass",e.VKq(2,te,t.isDefault)),e.xp6(1),e.hij(" ",t.text," ")}}function se(r,o){1&r&&(e.TgZ(0,"mat-icon"),e._uU(1,"add"),e.qZA())}function re(r,o){1&r&&(e.TgZ(0,"mat-icon"),e._uU(1,"remove"),e.qZA())}let ne=(()=>{class r{constructor(t,i,s){this.persistService=t,this.globalStateService=i,this.dialog=s,this.categories=[],this.headers=[],this.categoryName="",this.categoryIsDefault=!1,this.formVisible=!1,this.actionVerb="Add",this.errorMessage="",this.unsubscribe$=new b.x}ngOnInit(){this.loadCategories(),this.persistService.query("headers",!0).pipe((0,a.R)(this.unsubscribe$)).subscribe(t=>{this.headers.push(t)}),this.globalStateService.sendMessage("ManageCategories")}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}formSubmitted(t){const i=y.w.capitalize(this.categoryName);this.persistService.exists("categories",s=>s.text===i).pipe((0,a.R)(this.unsubscribe$)).subscribe(s=>{"Add"===this.actionVerb&&s?(this.errorMessage="This category exists!",setTimeout(()=>{this.errorMessage=""},5e3)):("Add"===this.actionVerb&&(this.currentCategory=this.persistService.newCategoryInstance(),this.categories.push(this.currentCategory)),this.currentCategory.text=i,this.currentCategory.isDefault=this.categoryIsDefault,this.currentCategory.isDefault?this.removeDefaultAll():this.persistService.put("categories",this.currentCategory.id,this.currentCategory).pipe((0,a.R)(this.unsubscribe$)).subscribe(()=>{this.globalStateService.sendMessage("CategoryChanged")}),this.resetForm(),this.formVisible=!1)})}xxxformSubmitted(t){const i=y.w.capitalize(this.categoryName);this.persistService.exists("categories",s=>s.text===i).pipe((0,a.R)(this.unsubscribe$)).subscribe(s=>{s?(this.errorMessage="This category exists!",setTimeout(()=>{this.errorMessage=""},5e3)):("Add"===this.actionVerb&&(this.currentCategory=this.persistService.newCategoryInstance(),this.categories.push(this.currentCategory)),this.currentCategory.text=i,this.currentCategory.isDefault=this.categoryIsDefault,this.currentCategory.isDefault?this.removeDefaultAll():this.persistService.put("categories",this.currentCategory.id,this.currentCategory).pipe((0,a.R)(this.unsubscribe$)).subscribe(()=>{this.globalStateService.sendMessage("CategoryChanged")}),this.resetForm(),this.formVisible=!1)})}onCheckboxChange(t){this.categoryIsDefault=t.checked}onCategoryClick(t){this.actionVerb="Save",this.formVisible=!0,this.currentCategory=t,this.categoryName=t.text,this.categoryIsDefault=t.isDefault}onDeleteCategory(){const t=new J.E("You want to delete this category?","Confirm Action");this.dialog.open(N.$,{maxWidth:"300px",data:t}).afterClosed().pipe((0,a.R)(this.unsubscribe$)).subscribe(s=>{s&&(this.persistService.delete("categories",this.currentCategory.id).pipe((0,a.R)(this.unsubscribe$)).subscribe(n=>{this.globalStateService.sendMessage("CategoryChanged"),this.persistService.query("headers",!0).pipe((0,a.R)(this.unsubscribe$)).subscribe(l=>{l.idCategory===this.currentCategory.id&&this.persistService.query("items",!0).pipe((0,a.R)(this.unsubscribe$)).subscribe(h=>{h.idHeader===l.id&&this.persistService.query("subitems",!0).subscribe(v=>{v.idItem===h.id&&this.persistService.delete("subitems",v.id).pipe((0,a.R)(this.unsubscribe$)).subscribe(()=>{})},v=>console.log(v),()=>{this.persistService.delete("items",h.id).pipe((0,a.R)(this.unsubscribe$)).subscribe(()=>{})})},h=>console.log(h),()=>{this.persistService.delete("headers",l.id).pipe((0,a.R)(this.unsubscribe$)).subscribe(()=>{})})})}),this.loadCategories(),this.toggleFormVisibility())})}toggleFormVisibility(){this.formVisible=!this.formVisible,this.categoryName=""}get sortedCategories(){return this.categories.sort((t,i)=>t.text.toLowerCase().localeCompare(i.text.toLowerCase()))}resetForm(){this.categoryName="",this.categoryIsDefault=!1,this.actionVerb="Add"}removeDefaultAll(){this.categories.forEach(t=>{t.id!==this.currentCategory.id&&(t.isDefault=!1)}),this.persistService.query("categories",!0).pipe((0,a.R)(this.unsubscribe$)).subscribe(t=>{t.isDefault=!1,this.persistService.put("categories",t.id,t).pipe((0,a.R)(this.unsubscribe$)).subscribe(()=>{})},t=>{},()=>{this.persistService.put("categories",this.currentCategory.id,this.currentCategory).pipe((0,a.R)(this.unsubscribe$)).subscribe(()=>{this.globalStateService.sendMessage("CategoryChanged")})})}loadCategories(){this.categories=[],this.persistService.query("categories",!0).pipe((0,a.R)(this.unsubscribe$)).subscribe(t=>{"quick"!==t.id&&this.categories.push(t)})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(f.Y),e.Y36(m.O),e.Y36(F.uw))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-manage-category"]],decls:11,vars:4,consts:[["fxLayout","column","fxLayoutAlign","stretch stretch"],["fxFlexFill","",1,"pad10"],[3,"submit",4,"ngIf"],[1,"scroll-container"],["mat-list-item","",3,"ngClass","click",4,"ngFor","ngForOf"],["mat-mini-fab","","color","primary","type","button","matTooltip","Add category",1,"add-fab",3,"click"],[4,"ngIf"],[3,"submit"],["fxLayout","row"],["fxFlex","85"],[1,"cpc"],["name","txtListName","matInput","","type","text",3,"ngModel","ngModelChange"],["class","err-mess",4,"ngIf"],["fxFlex","15",4,"ngIf"],["color","primary",3,"checked","change"],["fxLayoutAlign","end center"],["mat-raised-button","","color","primary",3,"disabled"],["mat-raised-button","","color","accent","type","button",3,"click"],[1,"err-mess"],["fxFlex","15"],["mat-icon-button","","type","button",3,"click"],["mat-list-item","",3,"ngClass","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,ee,23,6,"form",2),e.TgZ(3,"mat-card-subtitle"),e._uU(4,"Existing categories"),e.qZA(),e.TgZ(5,"div",3)(6,"mat-nav-list"),e.YNc(7,ie,2,4,"a",4),e.qZA()(),e.TgZ(8,"button",5),e.NdJ("click",function(){return i.toggleFormVisibility()}),e.YNc(9,se,2,0,"mat-icon",6),e.YNc(10,re,2,0,"mat-icon",6),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("ngIf",i.formVisible),e.xp6(5),e.Q6J("ngForOf",i.sortedCategories),e.xp6(2),e.Q6J("ngIf",!i.formVisible),e.xp6(1),e.Q6J("ngIf",i.formVisible))},dependencies:[g.mk,g.sg,g.O5,u._Y,u.Fj,u.JJ,u.JL,u.On,u.F,x.xw,x.Wh,x.s9,x.yH,j.oO,p.lW,p.RK,p.nh,P.oG,A.$j,S.Hw,I.gM,T.Hk,T.Tg,V.d,C.KE,C.hX,L.Nt],styles:[".add-fab[_ngcontent-%COMP%]{position:fixed;right:20px;bottom:10px;left:auto}"]}),r})();class z{constructor(o="",t="",i=""){this.id=o,this.idCategory=t,this.text=i,this.items=[]}}class G{constructor(o="",t="",i="",s=!1,n=0){this.id=o,this.idHeader=t,this.text=i,this.checked=s,this.rank=n,this.subs=[]}}var H=c(4385),U=c(3238);function oe(r,o){if(1&r&&(e.TgZ(0,"mat-option",18),e._uU(1),e.qZA()),2&r){const t=o.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.text," ")}}function ae(r,o){if(1&r){const t=e.EpF();e.TgZ(0,"mat-form-field")(1,"mat-select",16),e.NdJ("ngModelChange",function(s){e.CHM(t);const n=e.oxw();return e.KtG(n.header.id=s)}),e.YNc(2,oe,2,2,"mat-option",17),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngModel",t.header.id),e.xp6(1),e.Q6J("ngForOf",t.allHeaders)}}function ce(r,o){if(1&r&&(e.TgZ(0,"div",19),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Oqu(t.errorMessage)}}function le(r,o){if(1&r){const t=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onDeleteItem())}),e.TgZ(1,"mat-icon"),e._uU(2,"delete"),e.qZA()()}}function ue(r,o){if(1&r){const t=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.onDecrementSubItem())}),e.TgZ(1,"mat-icon"),e._uU(2,"delete_outline"),e.qZA()()}}function de(r,o){if(1&r){const t=e.EpF();e.TgZ(0,"div",23)(1,"div",4)(2,"mat-form-field",5)(3,"mat-label"),e._uU(4,"Sub item #2"),e.qZA(),e.TgZ(5,"input",24),e.NdJ("ngModelChange",function(s){e.CHM(t);const n=e.oxw(2);return e.KtG(n.subItemText2=s)}),e.qZA()()(),e.TgZ(6,"div",8)(7,"button",20),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.onDecrementSubItem())}),e.TgZ(8,"mat-icon"),e._uU(9,"delete_outline"),e.qZA()()()()}if(2&r){const t=e.oxw(2);e.xp6(5),e.Q6J("ngModel",t.subItemText2)}}function me(r,o){if(1&r){const t=e.EpF();e.TgZ(0,"div",5),e._UZ(1,"br"),e.TgZ(2,"div",3)(3,"div",4)(4,"mat-form-field",5)(5,"mat-label"),e._uU(6,"Sub item #1"),e.qZA(),e.TgZ(7,"input",21),e.NdJ("ngModelChange",function(s){e.CHM(t);const n=e.oxw();return e.KtG(n.subItemText1=s)}),e.qZA()()(),e.TgZ(8,"div",8),e.YNc(9,ue,3,0,"button",9),e.qZA()(),e.YNc(10,de,10,1,"div",22),e.qZA()}if(2&r){const t=e.oxw();e.xp6(7),e.Q6J("ngModel",t.subItemText1),e.xp6(2),e.Q6J("ngIf",1===t.nbSubItem),e.xp6(1),e.Q6J("ngIf",t.nbSubItem>1)}}function pe(r,o){if(1&r){const t=e.EpF();e.TgZ(0,"mat-checkbox",25),e.NdJ("ngModelChange",function(s){e.CHM(t);const n=e.oxw();return e.KtG(n.addMore=s)}),e._uU(1," Continue adding item "),e.qZA()}if(2&r){const t=e.oxw();e.Q6J("ngModel",t.addMore)}}let ge=(()=>{class r{constructor(t,i,s,n){this.activatedRoute=t,this.persistService=i,this.location=s,this.dialog=n,this.allHeaders=[],this.header=new z,this.item=new G,this.subItems=[],this.nbSubItem=0,this.addMore=!1,this.subItemText1="",this.subItemText2="",this.errorMessage="",this.verb="Edit",this.unsubscribe$=new b.x}ngOnInit(){this.item.text="",this.activatedRoute.params.pipe((0,a.R)(this.unsubscribe$)).subscribe(t=>{const i=t.id,s=t.itemid;""===s?this.verb="Add":this.persistService.get("items",s).pipe((0,a.R)(this.unsubscribe$)).subscribe(n=>{this.item=n,this.loadSubitems(n.id)}),this.persistService.get("headers",i).pipe((0,a.R)(this.unsubscribe$)).subscribe(n=>{this.header=n,this.persistService.query("headers",!0).pipe((0,a.R)(this.unsubscribe$)).subscribe({next:l=>{l.idCategory===n.idCategory&&this.allHeaders.push(l)},error:l=>{},complete:()=>{this.allHeaders=[...this.allHeaders].sort((l,h)=>l.text.localeCompare(h.text))}})})})}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}onDeleteItem(){const t=new J.E("You want to delete this item?","Confirm Action");this.dialog.open(N.$,{maxWidth:"300px",data:t}).afterClosed().pipe((0,a.R)(this.unsubscribe$)).subscribe(s=>{s&&(this.persistService.delete("items",this.item.id).pipe((0,a.R)(this.unsubscribe$)).subscribe(()=>{for(const n of this.subItems)this.persistService.delete("subitems",n.id).pipe((0,a.R)(this.unsubscribe$)).subscribe(()=>{})}),this.location.back())})}onIncrementSubItem(){this.canAddSubItem()&&(this.nbSubItem++,this.nbSubItem>2&&(this.nbSubItem=1))}onDecrementSubItem(){0===this.nbSubItem?this.subItemText1="":this.subItemText2="",this.nbSubItem--,this.nbSubItem<0&&(this.nbSubItem=0)}cancel(){this.location.back()}formSubmitted(t){if(""!==this.item.text.trim()){let i=new G;const s=y.w.capitalize(this.item.text);"Add"===this.verb?this.persistService.exists("items",n=>n.idHeader===this.header.id&&n.text===s).pipe((0,a.R)(this.unsubscribe$)).subscribe(n=>{n?(this.errorMessage=`This item exists in ${this.header.text}`,setTimeout(()=>{this.errorMessage=""},5e3)):(i=this.persistService.newItemInstance(this.header.id),i.text=s,this.persistService.put("items",i.id,i).pipe((0,a.R)(this.unsubscribe$)).subscribe(l=>{this.saveSubitems(i.id),this.addMore?this.reset():this.location.back()}))}):this.persistService.exists("items",n=>n.idHeader===this.header.id&&n.text===s&&n.id!==this.item.id).pipe((0,a.R)(this.unsubscribe$)).subscribe(n=>{n?(this.errorMessage=`This item already exists in ${this.header.text}`,setTimeout(()=>{this.errorMessage=""},5e3)):(this.item.text=s,this.item.idHeader=this.header.id,this.persistService.put("items",this.item.id,this.item).pipe((0,a.R)(this.unsubscribe$)).subscribe(l=>{this.saveSubitems(this.item.id),this.location.back()}))})}}canAddSubItem(){return 0===this.nbSubItem||1===this.nbSubItem&&this.subItemText1.length>0}loadSubitems(t){this.subItems=[],this.persistService.query("subitems",!0).pipe((0,a.R)(this.unsubscribe$)).subscribe(i=>{i.idItem===t&&(this.subItems.push(i),this.nbSubItem++,1===i.rank?this.subItemText1=i.text:2===i.rank&&(this.subItemText2=i.text))})}saveSubitems(t){if(this.nbSubItem>0){let i=this.persistService.newSubitemInstance(t);this.subItems.length>0&&(i=this.subItems[0]),i.text=y.w.capitalize(this.subItemText1.trim()),i.rank=1,this.persistService.put("subitems",i.id,i).pipe((0,a.R)(this.unsubscribe$)).subscribe(()=>{this.subItemText2&&(i=this.persistService.newSubitemInstance(t),this.subItems.length>1&&(i=this.subItems[1]),i.text=y.w.capitalize(this.subItemText2.trim()),i.rank=2,this.persistService.put("subitems",i.id,i).pipe((0,a.R)(this.unsubscribe$)).subscribe(()=>{}))})}for(let i=this.nbSubItem;i<this.subItems.length;i++)this.persistService.delete("subitems",this.subItems[i].id).pipe((0,a.R)(this.unsubscribe$)).subscribe(()=>{})}reset(){this.item.text="",this.nbSubItem=0,this.subItemText1="",this.subItemText2=""}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(_.gz),e.Y36(f.Y),e.Y36(g.Ye),e.Y36(F.uw))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-edit-item"]],decls:33,vars:10,consts:[[1,"pad10"],[3,"submit"],[4,"ngIf"],["fxLayout","row"],["fxFlex","85"],[1,"cpc"],["name","txtItemText","matInput","","type","text",3,"ngModel","ngModelChange"],["class","err-mess",4,"ngIf"],["fxFlex","15"],["mat-icon-button","","type","button",3,"click",4,"ngIf"],["fxLayoutAlign","start center",3,"ngClass","click"],["class","cpc",4,"ngIf"],["fxLayoutAlign","end center"],["mat-raised-button","","color","primary",3,"disabled"],["mat-raised-button","","color","accent","type","button",3,"click"],["class","add-more","color","primary","name","chkAddMore",3,"ngModel","ngModelChange",4,"ngIf"],["placeholder","Current List","name","curlist",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"err-mess"],["mat-icon-button","","type","button",3,"click"],["name","txtSubText1","matInput","","type","text",3,"ngModel","ngModelChange"],["fxLayout","","fxLayout","row",4,"ngIf"],["fxLayout","","fxLayout","row"],["name","txtSubText2","matInput","","type","text",3,"ngModel","ngModelChange"],["color","primary","name","chkAddMore",1,"add-more",3,"ngModel","ngModelChange"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"mat-card-title"),e._uU(2),e.TgZ(3,"b"),e._uU(4),e.qZA()(),e.TgZ(5,"form",1),e.NdJ("submit",function(n){return i.formSubmitted(n)}),e.YNc(6,ae,3,2,"mat-form-field",2),e.TgZ(7,"div",3)(8,"div",4)(9,"mat-form-field",5)(10,"mat-label"),e._uU(11,"Item text"),e.qZA(),e.TgZ(12,"input",6),e.NdJ("ngModelChange",function(n){return i.item.text=n}),e.qZA(),e.YNc(13,ce,2,1,"div",7),e.qZA()(),e.TgZ(14,"div",8),e.YNc(15,le,3,0,"button",9),e.qZA()(),e.TgZ(16,"div",10),e.NdJ("click",function(){return i.onIncrementSubItem()}),e.TgZ(17,"mat-icon"),e._uU(18,"add_circle"),e.qZA(),e._uU(19,"\xa0 "),e.TgZ(20,"span"),e._uU(21,"Add Sub Item"),e.qZA()(),e.YNc(22,me,11,3,"div",11),e._UZ(23,"br"),e.TgZ(24,"div",12)(25,"button",13),e._uU(26,"Save"),e.qZA(),e._uU(27,"\xa0 "),e.TgZ(28,"button",14),e.NdJ("click",function(){return i.cancel()}),e._uU(29,"Return"),e.qZA()(),e._UZ(30,"br")(31,"br"),e.YNc(32,pe,2,1,"mat-checkbox",15),e.qZA()()),2&t&&(e.xp6(2),e.hij("",i.verb," item for "),e.xp6(2),e.Oqu(i.header.text),e.xp6(2),e.Q6J("ngIf","Add"!==i.verb&&i.allHeaders.length>0),e.xp6(6),e.Q6J("ngModel",i.item.text),e.xp6(1),e.Q6J("ngIf",""!==i.errorMessage),e.xp6(2),e.Q6J("ngIf","Add"!==i.verb),e.xp6(1),e.Q6J("ngClass",i.canAddSubItem()?"":"disabled"),e.xp6(6),e.Q6J("ngIf",i.nbSubItem>0),e.xp6(3),e.Q6J("disabled",""===i.item.text),e.xp6(7),e.Q6J("ngIf","Add"===i.verb))},dependencies:[g.mk,g.sg,g.O5,u._Y,u.Fj,u.JJ,u.JL,u.On,u.F,x.xw,x.Wh,x.yH,j.oO,p.lW,p.RK,P.oG,A.n5,S.Hw,C.KE,C.hX,H.gD,U.ey,L.Nt],styles:[".add-more[_ngcontent-%COMP%]{font-size:smaller}.disabled[_ngcontent-%COMP%]{color:silver}"]}),r})();var he=c(3683);const be=["scrollzone"];function fe(r,o){if(1&r&&(e.TgZ(0,"mat-option",12),e._uU(1),e.qZA()),2&r){const t=o.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.text," ")}}function _e(r,o){if(1&r){const t=e.EpF();e.TgZ(0,"mat-form-field")(1,"mat-select",10),e.NdJ("selectionChange",function(s){e.CHM(t);const n=e.oxw();return e.KtG(n.onCategorySelected(s.value))})("ngModelChange",function(s){e.CHM(t);const n=e.oxw();return e.KtG(n.header.idCategory=s)}),e.YNc(2,fe,2,2,"mat-option",11),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngModel",t.header.idCategory),e.xp6(1),e.Q6J("ngForOf",t.categories)}}const xe=function(r,o){return["/Manage/EditItem",r,o]};function ve(r,o){if(1&r&&(e.TgZ(0,"a",17),e._uU(1),e.TgZ(2,"span",18),e._uU(3),e.qZA()()),2&r){const t=o.$implicit,i=e.oxw(2);e.Q6J("routerLink",e.WLB(3,xe,i.header.id,t.id)),e.xp6(1),e.hij(" ",t.text," "),e.xp6(2),e.hij("\xa0",i.getSubText(t),"")}}function Ce(r,o){if(1&r&&(e.TgZ(0,"div",13)(1,"mat-card-subtitle"),e._uU(2,"Existing items"),e.qZA(),e.TgZ(3,"div",14,15)(5,"mat-nav-list"),e.YNc(6,ve,4,6,"a",16),e.qZA()()()),2&r){const t=e.oxw();e.xp6(6),e.Q6J("ngForOf",t.items)}}function ye(r,o){1&r&&(e.TgZ(0,"div",19),e._uU(1," No item defined yet "),e.qZA())}function Te(r,o){if(1&r){const t=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.confirmClear())}),e.TgZ(1,"mat-icon"),e._uU(2,"delete_sweep"),e.qZA()()}}let Me=(()=>{class r{constructor(t,i,s,n,l){this.route=t,this.activatedRoute=i,this.persistService=s,this.location=n,this.dialog=l,this.title="",this.idHeader="",this.header=new z,this.items=[],this.categories=[],this.unsubscribe$=new b.x}set elem(t){t&&this.setScrollerHeight(t)}ngOnInit(){this.activatedRoute.params.pipe((0,a.R)(this.unsubscribe$)).subscribe(t=>{this.idHeader=t.id,this.persistService.query("categories",!0).pipe((0,a.R)(this.unsubscribe$)).subscribe(i=>{this.categories.push(i)}),this.persistService.get("headers",this.idHeader).pipe((0,a.R)(this.unsubscribe$)).subscribe(i=>{this.header=i,this.title=i.text;const s=[];this.persistService.query("items",!0).pipe((0,a.R)(this.unsubscribe$)).subscribe(n=>{n.idHeader===i.id&&(s.push(n),n.subs=[],this.persistService.query("subitems",!0).pipe((0,a.R)(this.unsubscribe$)).subscribe(l=>{l.idItem===n.id&&n.subs.push(l)}))},n=>console.log(n),()=>{this.items=s.sort((n,l)=>n.text.localeCompare(l.text))})})})}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}onCategorySelected(t){this.header.idCategory=t.value,this.persistService.put("headers",this.header.id,this.header).pipe((0,a.R)(this.unsubscribe$)).subscribe(()=>{})}confirmClear(){const t=new J.E("You want to clear this list?","Confirm Action");this.dialog.open(N.$,{maxWidth:"300px",data:t}).afterClosed().pipe((0,a.R)(this.unsubscribe$)).subscribe(s=>{s&&this.clearList()})}confirmDelete(){const t=new J.E("You want to delete this list?","Confirm Action");this.dialog.open(N.$,{maxWidth:"300px",data:t}).afterClosed().pipe((0,a.R)(this.unsubscribe$)).subscribe(s=>{s&&(this.clearList(),this.persistService.delete("headers",this.header.id).pipe((0,a.R)(this.unsubscribe$)).subscribe(()=>{this.location.back()}))})}onKeypress(t){return"Enter"!==t.key}onNameChanged(t){const i=t.target;void 0!==this.header.id&&(this.header.text=i.innerText,this.header.text.length>16&&(this.header.text=i.innerText.substring(0,16)),this.header.text=y.w.capitalize(this.header.text),this.persistService.put("headers",this.header.id,this.header).pipe((0,a.R)(this.unsubscribe$)).subscribe(s=>{i.innerText.length>16&&(i.innerText=i.innerText.substring(0,16))}))}addItem(){this.route.navigate(["/Manage/EditItem",this.header.id,""])}goBack(){this.location.back()}getSubText(t){let i=t.subs.sort((s,n)=>s.rank-n.rank).map(s=>s.text).join(", ");return i.length&&(i="["+i+"]"),i}clearList(){for(const t of this.items)this.persistService.delete("items",t.id).pipe((0,a.R)(this.unsubscribe$)).subscribe(()=>{});this.items=[]}setScrollerHeight(t){const i=t.nativeElement.getBoundingClientRect().top;t.nativeElement.style.height=window.innerHeight-(i+20+50)+"px"}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(_.F0),e.Y36(_.gz),e.Y36(f.Y),e.Y36(g.Ye),e.Y36(F.uw))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-manage-item"]],viewQuery:function(t,i){if(1&t&&e.Gf(be,5),2&t){let s;e.iGM(s=e.CRH())&&(i.elem=s.first)}},decls:21,vars:6,consts:[[1,"pad10"],[3,"contentEditable","keypress","input"],[4,"ngIf"],["class","list-item",4,"ngIf"],["class","no-item",4,"ngIf"],["fxLayoutAlign","space-evenly center",1,"pos-bottom","cpc"],["mat-icon-button","",3,"click"],["mat-icon-button","","aria-label","Clear item list",3,"click",4,"ngIf"],["mat-icon-button","","aria-label","Delete list",3,"click"],["mat-mini-fab","","color","primary","type","button","matTooltip","Add item",1,"add-fab",3,"click"],["placeholder","Category","name","category",3,"ngModel","selectionChange","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"list-item"],[1,"scroll-container"],["scrollzone",""],["mat-list-item","",3,"routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],[1,"ghost-text"],[1,"no-item"],["mat-icon-button","","aria-label","Clear item list",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div")(2,"mat-card-title"),e._uU(3,"Manage list "),e.TgZ(4,"b",1),e.NdJ("keypress",function(n){return i.onKeypress(n)})("input",function(n){return i.onNameChanged(n)}),e._uU(5),e.qZA()(),e._UZ(6,"br"),e.YNc(7,_e,3,2,"mat-form-field",2),e.qZA(),e.YNc(8,Ce,7,1,"div",3),e.YNc(9,ye,2,0,"div",4),e.qZA(),e.TgZ(10,"mat-toolbar",5)(11,"button",6),e.NdJ("click",function(){return i.goBack()}),e.TgZ(12,"mat-icon"),e._uU(13,"arrow_back"),e.qZA()(),e.YNc(14,Te,3,0,"button",7),e.TgZ(15,"button",8),e.NdJ("click",function(){return i.confirmDelete()}),e.TgZ(16,"mat-icon"),e._uU(17,"delete_forever"),e.qZA()()(),e.TgZ(18,"button",9),e.NdJ("click",function(){return i.addItem()}),e.TgZ(19,"mat-icon"),e._uU(20,"add"),e.qZA()()),2&t&&(e.xp6(4),e.Q6J("contentEditable",!0),e.xp6(1),e.hij("",i.title," "),e.xp6(2),e.Q6J("ngIf",i.categories),e.xp6(1),e.Q6J("ngIf",i.items&&i.items.length>0),e.xp6(1),e.Q6J("ngIf",!i.items||0==i.items.length),e.xp6(5),e.Q6J("ngIf",i.items&&i.items.length>0))},dependencies:[g.sg,g.O5,u.JJ,u.On,x.Wh,p.RK,p.nh,A.$j,A.n5,S.Hw,I.gM,T.Hk,T.Tg,C.KE,H.gD,U.ey,he.Ye,_.rH],styles:[".add-fab[_ngcontent-%COMP%]{position:fixed;right:20px;bottom:60px;left:auto}.no-item[_ngcontent-%COMP%]{margin-top:20px;color:gray;text-align:center}.icon-kit[_ngcontent-%COMP%]{font-size:9pt}.list-item[_ngcontent-%COMP%]{overflow-y:auto}.scroll-container[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;overflow-y:scroll}.ghost-text[_ngcontent-%COMP%]{color:silver;font-size:8pt}"]}),r})();const Se=["scrollzone"];function Ie(r,o){if(1&r&&(e.TgZ(0,"div",15),e._uU(1),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.Oqu(t.errorMessage)}}function Ze(r,o){if(1&r){const t=e.EpF();e.TgZ(0,"form",9),e.NdJ("submit",function(s){e.CHM(t);const n=e.oxw();return e.KtG(n.formSubmitted(s))}),e.TgZ(1,"mat-form-field",10)(2,"mat-label"),e._uU(3,"List name"),e.qZA(),e.TgZ(4,"input",11),e.NdJ("ngModelChange",function(s){e.CHM(t);const n=e.oxw();return e.KtG(n.listName=s)}),e.qZA(),e.YNc(5,Ie,2,1,"div",12),e.qZA(),e._uU(6," \xa0"),e.TgZ(7,"button",13),e._uU(8,"Add"),e.qZA(),e._uU(9,"\xa0 "),e.TgZ(10,"button",14),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.toggleFormVisibility())}),e.TgZ(11,"mat-icon"),e._uU(12,"close"),e.qZA()(),e._UZ(13,"br"),e.qZA()}if(2&r){const t=e.oxw();e.xp6(4),e.Q6J("ngModel",t.listName),e.xp6(1),e.Q6J("ngIf",""!==t.errorMessage),e.xp6(2),e.Q6J("disabled",""===t.listName)}}function Ae(r,o){if(1&r&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&r){const t=o.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.text," ")}}function ke(r,o){if(1&r){const t=e.EpF();e.TgZ(0,"mat-form-field",16)(1,"mat-select",17),e.NdJ("selectionChange",function(s){e.CHM(t);const n=e.oxw();return e.KtG(n.onCategorySelected(s))})("ngModelChange",function(s){e.CHM(t);const n=e.oxw();return e.KtG(n.selectedCategoryId=s)}),e.YNc(2,Ae,2,2,"mat-option",18),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngModel",t.selectedCategoryId),e.xp6(1),e.Q6J("ngForOf",t.sortedCategories)}}const we=function(r){return["/Manage/ManageItem",r]};function Re(r,o){if(1&r&&(e.TgZ(0,"a",20),e._uU(1),e.qZA()),2&r){const t=o.$implicit,i=e.oxw();e.Q6J("routerLink",e.VKq(3,we,t.id)),e.xp6(1),e.AsE(" ",t.text," ",i.itemCount(t.id)," ")}}function Oe(r,o){1&r&&(e.TgZ(0,"mat-icon"),e._uU(1,"add"),e.qZA())}function Je(r,o){1&r&&(e.TgZ(0,"mat-icon"),e._uU(1,"remove"),e.qZA())}let Ne=(()=>{class r{constructor(t,i){this.persistService=t,this.globalStateService=i,this.listName="",this.formVisible=!1,this.headers=[],this.allItems=[],this.categories=[],this.errorMessage="",this.selectedCategoryId="",this.scrollSetted=!1,this.unsubscribe$=new b.x}ngOnInit(){this.globalStateService.sendMessage("ManageLists"),this.globalStateService.message$.pipe((0,a.R)(this.unsubscribe$)).subscribe(t=>{"CategoryChanged"===t&&(this.categories=[],this.persistService.query("categories",!0).pipe((0,a.R)(this.unsubscribe$)).subscribe(i=>{"quick"!==i.id&&this.categories.push(i)}))}),this.persistService.query("categories",!0).pipe((0,a.R)(this.unsubscribe$)).subscribe(t=>{"quick"!==t.id&&(this.categories.push(t),t.isDefault&&(this.selectedCategoryId=this.globalStateService.CurrentSelectedIdCategory))},t=>{},()=>{this.persistService.query("headers",!0).pipe((0,a.R)(this.unsubscribe$)).subscribe(t=>{(t.idCategory===this.selectedCategoryId||void 0===t.idCategory)&&this.headers.push(t)})}),this.persistService.query("items",!0).pipe((0,a.R)(this.unsubscribe$)).subscribe(t=>{this.allItems.push(t)})}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}ngAfterViewInit(){}onCategorySelected(t){this.globalStateService.CurrentSelectedIdCategory=t.value,this.selectedCategoryId=this.globalStateService.CurrentSelectedIdCategory,this.headers=[],this.persistService.query("headers",!0).pipe((0,a.R)(this.unsubscribe$)).subscribe(i=>{i.idCategory===this.selectedCategoryId&&this.headers.push(i)})}formSubmitted(t){if(""!==this.listName.trim()){const i=y.w.capitalize(this.listName.trim());this.persistService.exists("headers",s=>s.idCategory===this.selectedCategoryId&&s.text===i).pipe((0,a.R)(this.unsubscribe$)).subscribe(s=>{if(s){const n=this.categories.find(l=>l.id===this.selectedCategoryId);this.errorMessage=`This list exists in ${n?.text}!`,setTimeout(()=>{this.errorMessage=""},5e3)}else{const n=this.persistService.newHeaderInstance(this.selectedCategoryId);n.text=y.w.capitalize(this.listName),this.persistService.put("headers",n.id,n).pipe((0,a.R)(this.unsubscribe$)).subscribe(l=>{this.headers.push(n),this.listName="",this.formVisible=!1,setTimeout(()=>this.recalcScroll(),0)})}})}}itemCount(t){let i="";const s=this.allItems.filter(n=>n.idHeader===t).length;return s>0&&(i=`(${s})`),i}get sortedHeaders(){return this.headers.sort((t,i)=>t.text.localeCompare(i.text))}get sortedCategories(){return this.categories.sort((t,i)=>t.text.localeCompare(i.text))}toggleFormVisibility(){this.formVisible=!this.formVisible,setTimeout(()=>this.recalcScroll(),0)}recalcScroll(){this.globalStateService.IsManageListScrollSetted=!1,this.setScrollerHeight()}setScrollerHeight(){if(!this.globalStateService.IsManageListScrollSetted){const t=this.scrollzone.nativeElement.getBoundingClientRect().top;this.scrollzone.nativeElement.style.height=window.innerHeight-(t+20)+"px",this.globalStateService.IsManageListScrollSetted=!0}}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(f.Y),e.Y36(m.O))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-manage-list"]],viewQuery:function(t,i){if(1&t&&e.Gf(Se,5),2&t){let s;e.iGM(s=e.CRH())&&(i.scrollzone=s.first)}},decls:14,vars:5,consts:[["fxLayout","column","fxLayoutAlign","stretch stretch"],["fxFlexFill","",1,"pad10"],[3,"submit",4,"ngIf"],["class","",4,"ngIf"],[1,"scroll-container"],["scrollzone",""],["mat-list-item","",3,"routerLink",4,"ngFor","ngForOf"],["mat-mini-fab","","color","primary","type","button","matTooltip","Add list",1,"add-fab",3,"click"],[4,"ngIf"],[3,"submit"],[2,"width","150px"],["name","txtListName","matInput","","type","text",3,"ngModel","ngModelChange"],["class","err-mess",4,"ngIf"],["mat-raised-button","","color","primary",3,"disabled"],["mat-raised-button","","color","accent","type","button",3,"click"],[1,"err-mess"],[1,""],["placeholder","Category","name","category",3,"ngModel","selectionChange","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["mat-list-item","",3,"routerLink"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,Ze,14,3,"form",2),e.TgZ(3,"div"),e.YNc(4,ke,3,2,"mat-form-field",3),e.qZA(),e.TgZ(5,"mat-card-subtitle"),e._uU(6,"Existing lists"),e.qZA(),e.TgZ(7,"div",4,5)(9,"mat-nav-list"),e.YNc(10,Re,2,5,"a",6),e.qZA()(),e.TgZ(11,"button",7),e.NdJ("click",function(){return i.toggleFormVisibility()}),e.YNc(12,Oe,2,0,"mat-icon",8),e.YNc(13,Je,2,0,"mat-icon",8),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("ngIf",i.formVisible),e.xp6(2),e.Q6J("ngIf",i.categories),e.xp6(6),e.Q6J("ngForOf",i.sortedHeaders),e.xp6(2),e.Q6J("ngIf",!i.formVisible),e.xp6(1),e.Q6J("ngIf",i.formVisible))},dependencies:[g.sg,g.O5,u._Y,u.Fj,u.JJ,u.JL,u.On,u.F,x.xw,x.Wh,x.s9,p.lW,p.nh,A.$j,S.Hw,I.gM,T.Hk,T.Tg,C.KE,C.hX,H.gD,U.ey,L.Nt,_.rH],styles:[".c1[_ngcontent-%COMP%]{margin-top:10px}.add-fab[_ngcontent-%COMP%]{position:fixed;right:20px;bottom:10px;left:auto}.scroll-container[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;overflow-y:scroll}"]}),r})();var Ue=c(9751),De=c(8421);const{isArray:$e}=Array;var Ee=c(515),Fe=c(5403),Le=c(3269);var He=c(7009),K=c(1948),Q=c(1281);const Qe=["determinateSpinner"];function je(r,o){if(1&r&&(e.O4$(),e.TgZ(0,"svg",11),e._UZ(1,"circle",12),e.qZA()),2&r){const t=e.oxw();e.uIk("viewBox",t._viewBox()),e.xp6(1),e.Udp("stroke-dasharray",t._strokeCircumference(),"px")("stroke-dashoffset",t._strokeCircumference()/2,"px")("stroke-width",t._circleStrokeWidth(),"%"),e.uIk("r",t._circleRadius())}}const Pe=(0,U.pj)(class{constructor(r){this._elementRef=r}},"primary"),Ve=new e.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function ze(){return{diameter:B}}}),B=100;let Ke=(()=>{class r extends Pe{constructor(t,i,s){super(t),this.mode="mat-spinner"===this._elementRef.nativeElement.nodeName.toLowerCase()?"indeterminate":"determinate",this._value=0,this._diameter=B,this._noopAnimations="NoopAnimations"===i&&!!s&&!s._forceAnimations,s&&(s.color&&(this.color=this.defaultColor=s.color),s.diameter&&(this.diameter=s.diameter),s.strokeWidth&&(this.strokeWidth=s.strokeWidth))}get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,(0,Q.su)(t)))}get diameter(){return this._diameter}set diameter(t){this._diameter=(0,Q.su)(t)}get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(t){this._strokeWidth=(0,Q.su)(t)}_circleRadius(){return(this.diameter-10)/2}_viewBox(){const t=2*this._circleRadius()+this.strokeWidth;return`0 0 ${t} ${t}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(e.SBq),e.Y36(e.QbO,8),e.Y36(Ve))},r.\u0275cmp=e.Xpm({type:r,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(t,i){if(1&t&&e.Gf(Qe,5),2&t){let s;e.iGM(s=e.CRH())&&(i._determinateCircle=s.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:12,hostBindings:function(t,i){2&t&&(e.uIk("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow","determinate"===i.mode?i.value:null)("mode",i.mode),e.Udp("width",i.diameter,"px")("height",i.diameter,"px"),e.ekj("_mat-animation-noopable",i._noopAnimations)("mdc-circular-progress--indeterminate","indeterminate"===i.mode))},inputs:{color:"color",mode:"mode",value:"value",diameter:"diameter",strokeWidth:"strokeWidth"},exportAs:["matProgressSpinner"],features:[e.qOj],decls:14,vars:11,consts:[["circle",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["determinateSpinner",""],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(t,i){if(1&t&&(e.YNc(0,je,2,8,"ng-template",null,0,e.W1O),e.TgZ(2,"div",1,2),e.O4$(),e.TgZ(4,"svg",3),e._UZ(5,"circle",4),e.qZA()(),e.kcU(),e.TgZ(6,"div",5)(7,"div",6)(8,"div",7),e.GkF(9,8),e.qZA(),e.TgZ(10,"div",9),e.GkF(11,8),e.qZA(),e.TgZ(12,"div",10),e.GkF(13,8),e.qZA()()()),2&t){const s=e.MAs(1);e.xp6(4),e.uIk("viewBox",i._viewBox()),e.xp6(1),e.Udp("stroke-dasharray",i._strokeCircumference(),"px")("stroke-dashoffset",i._strokeDashOffset(),"px")("stroke-width",i._circleStrokeWidth(),"%"),e.uIk("r",i._circleRadius()),e.xp6(4),e.Q6J("ngTemplateOutlet",s),e.xp6(2),e.Q6J("ngTemplateOutlet",s),e.xp6(2),e.Q6J("ngTemplateOutlet",s)}},dependencies:[g.tP],styles:["@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-color-1-fade-in-out{from{opacity:.99}25%{opacity:.99}26%{opacity:0}89%{opacity:0}90%{opacity:.99}to{opacity:.99}}@keyframes mdc-circular-progress-color-2-fade-in-out{from{opacity:0}15%{opacity:0}25%{opacity:.99}50%{opacity:.99}51%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-3-fade-in-out{from{opacity:0}40%{opacity:0}50%{opacity:.99}75%{opacity:.99}76%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-4-fade-in-out{from{opacity:0}65%{opacity:0}75%{opacity:.99}90%{opacity:.99}to{opacity:0}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}.mdc-circular-progress{display:inline-flex;position:relative;direction:ltr;line-height:0;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-1{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-1-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-2{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-2-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-3{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-3-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-4{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-4-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--closed{opacity:0}.mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, transparent)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-1 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-2 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-3 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-4 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}"],encapsulation:2,changeDetection:0}),r})(),Be=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[g.ez,U.BQ]}),r})();function We(r,o){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",4),e._uU(2," Please paste JSON data in area below "),e.TgZ(3,"textarea",5),e.NdJ("paste",function(s){e.CHM(t);const n=e.oxw();return e.KtG(n.onDataPasted(s))})("ngModelChange",function(s){e.CHM(t);const n=e.oxw();return e.KtG(n.textData=s)}),e.qZA()(),e.TgZ(4,"div",6)(5,"input",7,8),e.NdJ("change",function(s){e.CHM(t);const n=e.oxw();return e.KtG(n.onUpload(s))}),e.qZA(),e.TgZ(7,"span"),e._uU(8,"Or select a file on your device"),e.qZA(),e.TgZ(9,"button",9),e.NdJ("click",function(){e.CHM(t);const s=e.MAs(6);return e.KtG(s.click())}),e._uU(10,"Select file"),e.qZA()(),e.BQk()}if(2&r){const t=e.oxw();e.xp6(3),e.Q6J("ngModel",t.textData)}}function Xe(r,o){if(1&r){const t=e.EpF();e.TgZ(0,"div"),e._uU(1," How do we restore this data?"),e._UZ(2,"br"),e.TgZ(3,"mat-radio-group",13),e.NdJ("change",function(s){e.CHM(t);const n=e.oxw(2);return e.KtG(n.onRadioChange(s))})("ngModelChange",function(s){e.CHM(t);const n=e.oxw(2);return e.KtG(n.restoreMode=s)}),e.TgZ(4,"mat-radio-button",14),e._uU(5,"Replace"),e.qZA(),e._uU(6,"\xa0\xa0 "),e.TgZ(7,"mat-radio-button",15),e._uU(8,"Merge"),e.qZA()(),e._UZ(9,"br")(10,"br"),e.TgZ(11,"button",9),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.onRestoreClick())}),e._uU(12," Restore "),e.qZA(),e._uU(13,"\xa0 "),e.TgZ(14,"button",16),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.onCancelClick())}),e._uU(15," Cancel "),e.qZA()()}if(2&r){const t=e.oxw(2);e.xp6(3),e.Q6J("ngModel",t.restoreMode)}}function et(r,o){1&r&&(e.TgZ(0,"div",17),e._UZ(1,"mat-spinner"),e.qZA())}function tt(r,o){if(1&r&&(e.TgZ(0,"div",10)(1,"span",11),e._uU(2,"Data is valid."),e.qZA(),e._UZ(3,"br"),e._uU(4),e.ALo(5,"date"),e._UZ(6,"br"),e._uU(7),e._UZ(8,"br")(9,"br"),e.YNc(10,Xe,16,1,"div",1),e.YNc(11,et,2,0,"div",12),e.qZA()),2&r){const t=e.oxw();e.xp6(4),e.hij(" Backup date: ",e.xi3(5,4,t.dbDate,"yyyy-MM-dd HH:mm"),""),e.xp6(3),e.hij(" Version: ",t.dbVersion,""),e.xp6(3),e.Q6J("ngIf",!t.isRestoring),e.xp6(1),e.Q6J("ngIf",t.isRestoring)}}function it(r,o){1&r&&(e.TgZ(0,"div",18),e._uU(1," An error occured. Please ensure that your data is complete and coming from this app. "),e.qZA())}let st=(()=>{class r{constructor(t,i,s,n,l){this.persistService=t,this.globalStateService=i,this.router=s,this.snackBar=n,this.document=l,this.textData="",this.dbIsValid=!1,this.error=!1,this.isRestoring=!1,this.restoreMode="R",this.topObject={},this.dbDate="",this.dbVersion=0,this.database=[],this.unsubscribe$=new b.x}ngOnInit(){this.globalStateService.sendMessage("ManageRestore")}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}onUpload(t){const s=t.target.files,n=s[0].name.split(".").pop().toLowerCase();if("txt json".indexOf(n)>-1){const l=new FileReader;l.readAsText(s[0]),l.onload=()=>{const h=l.result.toString();try{this.validateTexte(h)}catch{this.error=!0}}}else this.snackBar.open(".json is required","Fermer",{duration:3e3,panelClass:"snack-style"})}onDataPasted(t){const s=t.clipboardData?.getData("text");if(void 0!==s)try{this.validateTexte(s)}catch{this.error=!0}}onRadioChange(t){this.restoreMode=t.value}onRestoreClick(){this.isRestoring=!0,setTimeout(()=>this.restore())}validateTexte(t){this.error=!1,this.dbIsValid=!1,this.topObject=JSON.parse(t),this.topObject.version&&this.topObject.date&&this.topObject.database?(this.dbIsValid=!0,this.dbDate=this.topObject.date,this.dbVersion=this.topObject.version,this.database=this.topObject.database):(this.textData="",this.error=!0)}restore(){this.textData="",function Ye(...r){const o=(0,Le.jO)(r),t=function qe(r){return 1===r.length&&$e(r[0])?r[0]:r}(r);return t.length?new Ue.y(i=>{let s=t.map(()=>[]),n=t.map(()=>!1);i.add(()=>{s=n=null});for(let l=0;!i.closed&&l<t.length;l++)(0,De.Xf)(t[l]).subscribe((0,Fe.x)(i,h=>{if(s[l].push(h),s.every(v=>v.length)){const v=s.map(k=>k.shift());i.next(o?o(...v):v),s.some((k,ct)=>!k.length&&n[ct])&&i.complete()}},()=>{n[l]=!0,!s[l].length&&i.complete()}));return()=>{s=n=null}}):Ee.E}(this.persistService.clear("categories"),this.persistService.clear("headers"),this.persistService.clear("items"),this.persistService.clear("subitems"),this.persistService.clear("settings")).pipe((0,a.R)(this.unsubscribe$)).subscribe(()=>{for(const i of this.database){const s=Object.assign({},i);s.headers=[],this.persistService.put("categories",i.id,s).pipe((0,a.R)(this.unsubscribe$)).subscribe(()=>{for(const n of i.headers)Object.assign({},n).items=[],this.persistService.put("headers",n.id,n).pipe((0,a.R)(this.unsubscribe$)).subscribe(()=>{for(const h of n.items)Object.assign({},h).subs=[],this.persistService.put("items",h.id,h).pipe((0,a.R)(this.unsubscribe$)).subscribe(()=>{for(const k of h.subs)this.persistService.put("subitems",k.id,k).pipe((0,a.R)(this.unsubscribe$)).subscribe(()=>{})})})})}this.topObject.settings.forEach(i=>{this.persistService.put("settings",i.id,i).pipe((0,a.R)(this.unsubscribe$)).subscribe(()=>{})}),this.globalStateService.sendMessage("CategoryChanged"),setTimeout(()=>{this.document.location.href="/"},5e3)})}onCancelClick(){this.textData="",this.error=!1,this.dbIsValid=!1}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(f.Y),e.Y36(m.O),e.Y36(_.F0),e.Y36(He.ux),e.Y36(g.K0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-restore-database"]],decls:5,vars:3,consts:[[1,"pad10",2,"min-height","100%"],[4,"ngIf"],["class","data-valid",4,"ngIf"],["class","error-msg",4,"ngIf"],[1,"container"],["id","dbData","rows","5",1,"radius",3,"ngModel","paste","ngModelChange"],["fxLayout","column","fxLayoutAlign","start center",1,"upload-zone"],["hidden","","type","file","id","upload",3,"change"],["upload",""],["mat-raised-button","","color","primary","type","button",3,"click"],[1,"data-valid"],[1,"fb"],["fxLayoutAlign","center center","style","min-height: 100%;",4,"ngIf"],[3,"ngModel","change","ngModelChange"],["value","R","color","primary"],["value","M","color","primary"],["mat-raised-button","","color","accent","type","button",3,"click"],["fxLayoutAlign","center center",2,"min-height","100%"],[1,"error-msg"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div"),e.YNc(2,We,11,1,"ng-container",1),e.YNc(3,tt,12,7,"div",2),e.YNc(4,it,2,0,"div",3),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("ngIf",!i.dbIsValid),e.xp6(1),e.Q6J("ngIf",i.dbIsValid),e.xp6(1),e.Q6J("ngIf",i.error))},dependencies:[g.O5,u.Fj,u.JJ,u.On,x.xw,x.Wh,p.lW,K.VQ,K.U0,Ke,g.uU],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;animation:animateWidth 3s infinite;position:relative}.sectionContainer[_ngcontent-%COMP%] > textarea[_ngcontent-%COMP%]{flex:1 1 auto;width:100%;padding:5px;box-sizing:border-box}.error-msg[_ngcontent-%COMP%]{margin-top:20px;color:red}.data-valid[_ngcontent-%COMP%], .upload-zone[_ngcontent-%COMP%]{margin-top:20px}.radius[_ngcontent-%COMP%]{border-radius:7px}  .snack-style{background-color:#81a5b8;color:#000;font-weight:700}"]}),r})();var rt=c(455);const nt=[{path:"ManageLists",component:Ne},{path:"ManageCategories",component:ne},{path:"ManageItem/:id",component:Me},{path:"EditItem/:id/:itemid",component:ge},{path:"BackupDatabase",component:Z},{path:"RestoreDatabase",component:st},{path:"EditSettings",component:(()=>{class r{constructor(t,i,s,n,l,h){this.globalStateService=t,this.persistService=i,this.dialog=s,this.router=n,this.fb=l,this.ref=h,this.unsubscribe$=new b.x}ngOnInit(){this.globalStateService.sendMessage("EditSettings"),this.createForm(),this.initForm(),this.formSettings.get("QuickList").valueChanges.pipe((0,a.R)(this.unsubscribe$)).subscribe(t=>{this.prepareQuickList(t)}),this.formSettings.valueChanges.pipe((0,a.R)(this.unsubscribe$)).subscribe(t=>{this.saveValues(t)})}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}saveValues(t){for(const i in t)"SortChecked"===i&&this.globalStateService.putSetting("sort-checked",t[i]?"1":"0")}initForm(){this.formSettings.patchValue({QuickList:"1"===this.globalStateService.getSetting("quick-mode"),SortChecked:"1"===this.globalStateService.getSetting("sort-checked")})}prepareQuickList(t){if(t){const i=this.persistService.newCategoryInstance();i.id="quick",i.text="Quick",i.description="Quick Category",i.isDefault=!1,i.headers=[],this.persistService.put("categories",i.id,i).pipe((0,a.R)(this.unsubscribe$)).subscribe(()=>{const s=this.persistService.newHeaderInstance(i.id);s.id=i.id,s.text=i.text,s.items=[],this.persistService.put("headers",s.id,s).pipe((0,a.R)(this.unsubscribe$)).subscribe(()=>{this.globalStateService.putSetting("quick-mode","1"),this.formSettings.patchValue({QuickList:!0})})})}else this.confirmRemoval()}confirmRemoval(){this.persistService.exists("items",t=>"quick"===t.idHeader).pipe((0,a.R)(this.unsubscribe$)).subscribe(t=>{if(t){const i=new J.E("You want to cancel quick mode?","Confirm Action");this.dialog.open(N.$,{maxWidth:"300px",data:i}).afterClosed().pipe((0,a.R)(this.unsubscribe$)).subscribe(n=>{n?this.quickRemoval():(this.globalStateService.putSetting("quick-mode","1"),this.formSettings.patchValue({QuickList:!0}))})}else this.quickRemoval()})}quickRemoval(){this.persistService.delete("headers","quick").pipe((0,a.R)(this.unsubscribe$)).subscribe(()=>{this.persistService.delete("categories","quick").pipe((0,a.R)(this.unsubscribe$)).subscribe(()=>{})})}createForm(){this.formSettings=this.fb.group({QuickList:[!1],SortChecked:[!1]})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(m.O),e.Y36(f.Y),e.Y36(F.uw),e.Y36(_.F0),e.Y36(u.QS),e.Y36(e.sBO))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-edit-settings"]],decls:12,vars:1,consts:[[1,"pad10"],[3,"formGroup"],["color","accent","name","quick-mode","formControlName","QuickList",1,"example-margin"],["color","accent","name","quick-mode","formControlName","SortChecked",1,"example-margin"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"h1"),e._uU(2,"Settings"),e.qZA(),e.TgZ(3,"form",1)(4,"mat-list")(5,"mat-list-item")(6,"mat-slide-toggle",2),e._uU(7," Enable Quick List "),e.qZA()(),e.TgZ(8,"mat-list-item")(9,"mat-slide-toggle",3),e._uU(10," Sort checked items "),e.qZA()()()(),e._UZ(11,"mat-divider"),e.qZA()),2&t&&(e.xp6(3),e.Q6J("formGroup",i.formSettings))},dependencies:[u._Y,u.JJ,u.JL,u.sg,u.u,T.i$,T.Tg,V.d,rt.Rr]}),r})()},{path:"FreshInstall",component:(()=>{class r{constructor(t,i,s,n){this.persistService=t,this.globalStateService=i,this.route=s,this.document=n,this.categoryName="Grocery",this.listName="Dairies",this.unsubscribe$=new b.x}ngOnInit(){this.globalStateService.sendMessage("FreshInstall")}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}cancel(){this.document.location.href="https://www.google.com"}install(){const t=this.persistService.newCategoryInstance();t.text=this.categoryName,this.persistService.put("categories",t.id,t).pipe((0,a.R)(this.unsubscribe$)).subscribe(()=>{const i=this.persistService.newHeaderInstance(t.id);i.text=this.listName,this.persistService.put("headers",i.id,i).pipe((0,a.R)(this.unsubscribe$)).subscribe(()=>{this.route.navigate(["/Liste",t.id])})})}get formValid(){return""!=this.categoryName.trim()&&""!=this.listName.trim()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(f.Y),e.Y36(m.O),e.Y36(_.F0),e.Y36(g.K0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-fresh-install"]],decls:43,vars:3,consts:[[1,"pad10"],["fxLayoutAlign","center"],["fxLayoutAlign","start center",1,"img-row"],["src","assets/icons/icon-72x72.png","alt","Logo"],[1,"main-bloc","tac"],[2,"width","80%"],[1,"cpc"],["name","txtCatName","matInput","","type","text",3,"ngModel","ngModelChange"],[1,"mart20"],["name","txtListName","matInput","","type","text",3,"ngModel","ngModelChange"],["fxLayoutAlign","end center"],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-raised-button","","color","accent","type","button",3,"click"],["fxLayoutAlign","center center",1,"pos-bottom","tac","cpc","fine-print"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e._uU(4,"\xa0 "),e.TgZ(5,"h1"),e._uU(6,"Welcome to Lister"),e.qZA()()(),e.TgZ(7,"div",4),e._uU(8," It l\u{1f440}ks like it's your first time here!"),e._UZ(9,"br"),e._uU(10," Don't worry! You'll be good to go in no time."),e._UZ(11,"br")(12,"br")(13,"br"),e._uU(14," You need to define a category and a list."),e._UZ(15,"br")(16,"br"),e.TgZ(17,"div",1)(18,"mat-card",5)(19,"div")(20,"mat-form-field",6)(21,"mat-label"),e._uU(22,"Initial Category Name"),e.qZA(),e.TgZ(23,"input",7),e.NdJ("ngModelChange",function(n){return i.categoryName=n}),e.qZA(),e.TgZ(24,"mat-hint"),e._uU(25,"eg.: Grocery, Kids, Car"),e.qZA()()(),e.TgZ(26,"div",8)(27,"mat-form-field",6)(28,"mat-label"),e._uU(29,"Initial List Name"),e.qZA(),e.TgZ(30,"input",9),e.NdJ("ngModelChange",function(n){return i.listName=n}),e.qZA(),e.TgZ(31,"mat-hint"),e._uU(32,"eg.: Dairies, Fresh, Health, Booze"),e.qZA()()(),e._UZ(33,"br")(34,"br"),e.TgZ(35,"div",10)(36,"button",11),e.NdJ("click",function(){return i.install()}),e._uU(37,"Continue"),e.qZA(),e._uU(38,"\xa0 "),e.TgZ(39,"button",12),e.NdJ("click",function(){return i.cancel()}),e._uU(40,"Get me outa here!"),e.qZA()()()()(),e.TgZ(41,"div",13),e._uU(42," Brought to you by JF Gagnon - January 2021 "),e.qZA()()),2&t&&(e.xp6(23),e.Q6J("ngModel",i.categoryName),e.xp6(7),e.Q6J("ngModel",i.listName),e.xp6(6),e.Q6J("disabled",!i.formValid))},dependencies:[u.Fj,u.JJ,u.On,x.Wh,p.lW,A.a8,C.KE,C.hX,C.bx,L.Nt],styles:[".img-row[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;width:32px;height:32px}.main-bloc[_ngcontent-%COMP%]{margin-top:15px;font-size:18px;line-height:25px}.fine-print[_ngcontent-%COMP%]{font-size:11px;margin-bottom:10px}"]}),r})()}];let ot=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[_.Bz.forChild(nt),_.Bz]}),r})(),at=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[g.ez,u.u5,u.UX,M.o9,w.Iq,$.j,ot,Be]}),r})()},4327:function(Y,D){var c,u;void 0!==(u="function"==typeof(c=function(){"use strict";function M(d,e,f){var m=new XMLHttpRequest;m.open("GET",d),m.responseType="blob",m.onload=function(){a(m.response,e,f)},m.onerror=function(){console.error("could not download file")},m.send()}function $(d){var e=new XMLHttpRequest;e.open("HEAD",d,!1);try{e.send()}catch{}return 200<=e.status&&299>=e.status}function _(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(e)}}var b="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,q=b.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),a=b.saveAs||("object"!=typeof window||window!==b?function(){}:"download"in HTMLAnchorElement.prototype&&!q?function(d,e,f){var m=b.URL||b.webkitURL,p=document.createElement("a");p.download=e=e||d.name||"download",p.rel="noopener","string"==typeof d?(p.href=d,p.origin===location.origin?_(p):$(p.href)?M(d,e,f):_(p,p.target="_blank")):(p.href=m.createObjectURL(d),setTimeout(function(){m.revokeObjectURL(p.href)},4e4),setTimeout(function(){_(p)},0))}:"msSaveOrOpenBlob"in navigator?function(d,e,f){if(e=e||d.name||"download","string"!=typeof d)navigator.msSaveOrOpenBlob(function w(d,e){return typeof e>"u"?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\ufeff",d],{type:d.type}):d}(d,f),e);else if($(d))M(d,e,f);else{var m=document.createElement("a");m.href=d,m.target="_blank",setTimeout(function(){_(m)})}}:function(d,e,f,m){if((m=m||open("","_blank"))&&(m.document.title=m.document.body.innerText="downloading..."),"string"==typeof d)return M(d,e,f);var p="application/octet-stream"===d.type,S=/constructor/i.test(b.HTMLElement)||b.safari,I=/CriOS\/[\d]+/.test(navigator.userAgent);if((I||p&&S||q)&&typeof FileReader<"u"){var R=new FileReader;R.onloadend=function(){var Z=R.result;Z=I?Z:Z.replace(/^data:[^;]*;/,"data:attachment/file;"),m?m.location.href=Z:location=Z,m=null},R.readAsDataURL(d)}else{var E=b.URL||b.webkitURL,O=E.createObjectURL(d);m?m.location=O:location.href=O,m=null,setTimeout(function(){E.revokeObjectURL(O)},4e4)}});b.saveAs=a.saveAs=a,Y.exports=a})?c.apply(D,[]):c)&&(Y.exports=u)}}]);